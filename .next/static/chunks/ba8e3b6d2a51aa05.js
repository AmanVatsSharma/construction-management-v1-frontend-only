(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:d,...c},m)=>(0,t.createElement)("svg",{ref:m,...a,width:s,height:s,stroke:e,strokeWidth:i?24*Number(l)/Number(s):l,className:r("lucide",n),...c},[...d.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,a)=>{let l=(0,t.forwardRef)(({className:l,...i},n)=>(0,t.createElement)(s,{ref:n,iconNode:a,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,l),...i}));return l.displayName=`${e}`,l};e.s(["default",()=>l],75254)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},37727,94351,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>r],37727);let a=(0,t.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);e.s(["Home",()=>a],94351)},17923,e=>{"use strict";let t=(0,e.i(75254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],17923)},86311,56272,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>r],86311);let a=(0,t.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>a],56272)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},39616,92270,64659,73375,63059,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>r],39616);let a=(0,t.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);e.s(["LogOut",()=>a],92270);let s=(0,t.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>s],64659);let l=(0,t.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>l],73375);let i=(0,t.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>i],63059)},12426,78894,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>r],12426);let a=(0,t.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894)},79265,45423,55436,84614,46240,e=>{"use strict";var t=e.i(43476),r=e.i(37727),a=e.i(94351),s=e.i(17923),l=e.i(86311),i=e.i(56272),n=e.i(78583),o=e.i(39616),d=e.i(92270),c=e.i(64659),m=e.i(73375),u=e.i(63059),x=e.i(87316),h=e.i(12426),p=e.i(78894),b=e.i(75254);let f=(0,b.default)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),g=(0,b.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var y=e.i(22016),v=e.i(18566);function j({isOpen:e,isCollapsed:b,onToggle:j,onCollapse:N}){let k=(0,v.usePathname)(),w=[{icon:a.Home,label:"Dashboard",href:"/"},{icon:g,label:"Modules",href:"/modules"},{icon:s.BarChart3,label:"Projects",href:"/projects"},{icon:l.MessageSquare,label:"Chat",href:"/chat"},{icon:i.CheckSquare,label:"Tasks",href:"/tasks"},{icon:n.FileText,label:"Reports",href:"/reports"},{icon:x.Calendar,label:"Site Diary",href:"/site-diary"},{icon:h.DollarSign,label:"Budget",href:"/budget"},{icon:f,label:"RFI & Submittals",href:"/rfi"},{icon:p.AlertTriangle,label:"Risk",href:"/risk"},{icon:h.DollarSign,label:"Invoicing",href:"/invoicing"},{icon:o.Settings,label:"Settings",href:"/settings"}];return(0,t.jsxs)(t.Fragment,{children:[e&&(0,t.jsx)("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>j(!1),role:"presentation"}),(0,t.jsxs)("aside",{className:`${e?"translate-x-0":"-translate-x-full"} fixed lg:static lg:translate-x-0 z-40 h-screen transition-all duration-300 ease-in-out flex flex-col shadow-lg border-r border-border bg-card ${b?"w-20":"w-64"}`,children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between flex-shrink-0",children:[!b&&(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-primary-foreground font-bold text-lg font-heading",children:"C"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-foreground font-heading",children:"ConstructHub"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"v0.1"})]})]}),(0,t.jsx)("button",{onClick:()=>N(!b),className:"hidden lg:flex p-1.5 hover:bg-muted rounded-lg transition-colors","aria-label":b?"Expand sidebar":"Collapse sidebar",title:b?"Expand sidebar":"Collapse sidebar",children:b?(0,t.jsx)(u.ChevronRight,{className:"w-5 h-5"}):(0,t.jsx)(m.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>j(!1),className:"lg:hidden p-1 hover:bg-muted rounded","aria-label":"Close sidebar",children:(0,t.jsx)(r.X,{className:"w-5 h-5"})})]}),!b&&(0,t.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2 font-semibold uppercase tracking-wider",children:"Current Project"}),(0,t.jsxs)("button",{className:"w-full px-3 py-2.5 bg-primary/10 border border-primary/30 rounded-lg text-sm text-foreground font-medium hover:bg-primary/20 transition-colors flex items-center justify-between group",children:[(0,t.jsx)("span",{className:"truncate group-hover:text-primary transition-colors",children:"Downtown Tower Phase 2"}),(0,t.jsx)(c.ChevronDown,{className:"w-4 h-4 flex-shrink-0"})]})]}),(0,t.jsx)("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:w.map(r=>{let a=k===r.href||"/"!==r.href&&k.startsWith(r.href);return(0,t.jsxs)(y.default,{href:r.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all group ${a?"bg-primary text-primary-foreground":"text-foreground hover:bg-primary/10 hover:text-primary"} ${b?"justify-center":""}`,title:b?r.label:void 0,onClick:()=>{e&&j(!1)},children:[(0,t.jsx)(r.icon,{className:"w-5 h-5 flex-shrink-0 transition-colors"}),!b&&(0,t.jsx)("span",{className:"font-medium text-sm",children:r.label})]},r.href)})}),(0,t.jsx)("div",{className:"p-2 border-t border-border",children:(0,t.jsxs)("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-foreground hover:bg-destructive/10 hover:text-destructive transition-all font-medium ${b?"justify-center":""}`,title:b?"Logout":void 0,children:[(0,t.jsx)(d.LogOut,{className:"w-5 h-5"}),!b&&(0,t.jsx)("span",{className:"text-sm",children:"Logout"})]})})]})]})}e.s(["Sidebar",()=>j],79265);let N=(0,b.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),k=(0,b.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);e.s(["Bell",()=>k],45423);let w=(0,b.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>w],55436);let C=(0,b.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>C],84614);var M=e.i(71645),S=e.i(95840);function L({onToggleSidebar:e,onToggleChat:r}){let[a,s]=(0,M.useState)(!1),[i,n]=(0,M.useState)(!1),{setChatOpen:o}=(0,S.useChat)();return!function({onSearchOpen:e,onChatOpen:t,onProjectsOpen:r,onNewMessage:a}){(0,M.useEffect)(()=>{let s=s=>{let l=s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement;if("/"!==s.key||l||(s.preventDefault(),e?.()),"g"===s.key){let e=a=>{"c"===a.key?(a.preventDefault(),t?.()):"p"===a.key&&(a.preventDefault(),r?.()),document.removeEventListener("keydown",e)};document.addEventListener("keydown",e),setTimeout(()=>{document.removeEventListener("keydown",e)},1500)}(s.ctrlKey||s.metaKey)&&s.shiftKey&&"m"===s.key&&(s.preventDefault(),a?.())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t,r,a])}({onSearchOpen:()=>n(!0),onChatOpen:()=>{o(!0),r()}}),(0,t.jsx)("header",{className:"sticky top-0 z-20 border-b border-border bg-card backdrop-blur-md bg-opacity-95",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 h-16 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:e,className:"lg:hidden p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Toggle sidebar",children:(0,t.jsx)(N,{className:"w-5 h-5"})}),(0,t.jsx)("h2",{className:"text-lg font-bold text-foreground font-heading",children:"Dashboard"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-2 bg-muted px-4 py-2 rounded-lg border border-border focus-within:border-primary transition-colors group cursor-pointer",role:"button",tabIndex:0,"aria-label":"Search projects and tasks (press / to focus)",onClick:()=>n(!0),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n(!0)},children:[(0,t.jsx)(w,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:"Search projects, tasks...",className:"bg-transparent text-sm outline-none w-48 text-foreground placeholder:text-muted-foreground","aria-label":"Search"}),(0,t.jsx)("kbd",{className:"hidden sm:inline text-xs text-muted-foreground ml-auto px-2 py-1 rounded bg-card border border-border",children:"/"})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-muted rounded-lg transition-colors hover:text-primary","aria-label":"Toggle chat",title:"Open chat (press g then c)",children:(0,t.jsx)(l.MessageSquare,{className:"w-5 h-5"})}),(0,t.jsxs)("button",{className:"relative p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Notifications","aria-describedby":"notification-count",children:[(0,t.jsx)(k,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-secondary rounded-full",id:"notification-count","aria-live":"polite"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>s(!a),className:"flex items-center gap-3 pl-3 pr-2 py-2 rounded-lg hover:bg-muted transition-colors border border-border","aria-label":"User menu","aria-expanded":a,"aria-haspopup":"menu",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(C,{className:"w-4 h-4 text-primary-foreground","aria-hidden":"true"})}),(0,t.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-foreground",children:"John Doe"})]}),a&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg overflow-hidden z-50",role:"menu",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-border",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"John Doe"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"john.doe@example.com"})]}),(0,t.jsxs)("div",{className:"py-2",children:[(0,t.jsx)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left",role:"menuitem",children:"Profile Settings"}),(0,t.jsx)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left",role:"menuitem",children:"Preferences"}),(0,t.jsx)("hr",{className:"border-border my-2"}),(0,t.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-destructive hover:bg-muted transition-colors text-left flex items-center gap-2",role:"menuitem",children:[(0,t.jsx)(d.LogOut,{className:"w-4 h-4","aria-hidden":"true"}),"Logout"]})]})]})]})]})]})})}e.s(["Topbar",()=>L],46240)},23585,e=>{"use strict";let t=(0,e.i(75254).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},50894,43432,78716,14764,82735,97960,94771,29006,92930,e=>{"use strict";var t=e.i(43476),r=e.i(55436),a=e.i(7233),s=e.i(23585),l=e.i(75254);let i=(0,l.default)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),n=(0,l.default)("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),o=(0,l.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>o],43432);let d=(0,l.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);e.s(["Video",()=>d],78716);var c=e.i(45423),m=e.i(71645),u=e.i(95840),x=e.i(86311);function h({onChatSelect:e}){let{chats:l,selectChat:h,togglePinChat:p,selectedChat:b}=(0,u.useChat)(),[f,g]=(0,m.useState)(""),[y,v]=(0,m.useState)(null),j=[...l.filter(e=>e.isPinned),...l.filter(e=>!e.isPinned)];return(0,t.jsxs)("div",{className:"w-80 border-r border-border bg-card flex flex-col shadow-md",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border space-y-4 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-foreground font-heading",children:"Messages"}),(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Start new chat",title:"Start new chat",children:(0,t.jsx)(a.Plus,{className:"w-5 h-5 text-primary","aria-hidden":"true"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted px-3 py-2 rounded-lg border border-border focus-within:border-primary transition-colors",children:[(0,t.jsx)(r.Search,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"}),(0,t.jsx)("input",{type:"text",placeholder:"Search chats...",value:f,onChange:e=>g(e.target.value),className:"bg-transparent text-sm outline-none flex-1 text-foreground placeholder:text-muted-foreground","aria-label":"Search chats"})]}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",role:"tablist",children:["All","Teams","Contractors","Site"].map(e=>(0,t.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap bg-muted text-foreground hover:bg-primary/20 hover:text-primary transition-colors",role:"tab","aria-selected":"All"===e,"aria-label":`Filter by ${e}`,children:e},e))})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-1 p-2",role:"list",children:0===j.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,t.jsx)(x.MessageSquare,{className:"w-12 h-12 text-muted-foreground mb-2 opacity-50","aria-hidden":"true"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No chats yet"})]}):j.map(r=>(0,t.jsxs)("div",{className:"relative group",role:"listitem",children:[(0,t.jsx)("button",{onClick:()=>{h(r),e?.()},onKeyDown:t=>{var a;return a=()=>{h(r),e?.()},void(("Enter"===t.key||" "===t.key)&&(t.preventDefault(),a()))},className:`w-full px-3 py-3 rounded-lg text-left transition-all hover:bg-muted group focus:outline-none focus:ring-2 focus:ring-primary/50 ${b?.id===r.id?"bg-primary/10 border border-primary/30":""}`,"aria-label":`${r.name}${r.unreadCount>0?`, ${r.unreadCount} unread`:""}`,"aria-current":b?.id===r.id?"true":"false",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm ${"direct"===r.type?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,"aria-hidden":"true",children:r.name.substring(0,2).toUpperCase()}),r.isOnline&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-accent rounded-full border-2 border-card","aria-label":"Online"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-baseline justify-between gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground truncate text-sm",children:r.name}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:r.lastMessageTime?new Date(r.lastMessageTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:r.lastMessage}),r.tags.length>0&&(0,t.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:r.tags.map(e=>(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs bg-primary/10 text-primary rounded","aria-label":e,children:e},e))})]}),r.unreadCount>0&&(0,t.jsx)("div",{className:"w-5 h-5 bg-secondary text-secondary-foreground rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0","aria-label":`${r.unreadCount} unread`,children:r.unreadCount})]})}),(0,t.jsxs)("div",{className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),p(r.id)},className:"p-1.5 bg-card border border-border rounded hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50","aria-label":r.isPinned?"Unpin chat":"Pin chat",title:r.isPinned?"Unpin":"Pin",children:r.isPinned?(0,t.jsx)(n,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"}):(0,t.jsx)(i,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),v(y===r.id?null:r.id)},className:"p-1.5 bg-card border border-border rounded hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50","aria-label":"More options","aria-expanded":y===r.id,"aria-haspopup":"menu",children:(0,t.jsx)(s.MoreVertical,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"})})]}),y===r.id&&(0,t.jsxs)("div",{className:"absolute right-0 top-12 w-40 bg-card border border-border rounded-lg shadow-lg z-50",role:"menu",children:[(0,t.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,t.jsx)(o,{className:"w-4 h-4","aria-hidden":"true"}),"Call"]}),(0,t.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,t.jsx)(d,{className:"w-4 h-4","aria-hidden":"true"}),"Video Call"]}),(0,t.jsx)("hr",{className:"border-border my-2"}),(0,t.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,t.jsx)(c.Bell,{className:"w-4 h-4","aria-hidden":"true"}),"Mute"]}),(0,t.jsx)("button",{className:"w-full px-4 py-2 text-sm text-destructive hover:bg-muted transition-colors text-left focus:outline-none focus:bg-muted",role:"menuitem",children:"Delete"})]})]},r.id))})]})}e.s(["ChatListPanel",()=>h],50894);let p=(0,l.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>p],14764);let b=(0,l.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);e.s(["Paperclip",()=>b],82735);let f=(0,l.default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Smile",()=>f],97960);let g=(0,l.default)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);e.s(["CheckCheck",()=>g],94771);let y=(0,l.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);e.s(["Reply",()=>y],29006);let v=(0,l.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>v],92930)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},10265,23891,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(79265),s=e.i(46240),l=e.i(50894),i=e.i(14764),n=e.i(82735),o=e.i(97960),d=e.i(43432),c=e.i(78716),m=e.i(23585),u=e.i(73375),x=e.i(94771),h=e.i(29006),p=e.i(92930),b=e.i(27612);e.i(78583);var f=e.i(75254);(0,f.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var g=e.i(95840);let y=(0,f.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),v=(0,f.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var j=e.i(64659);function N({chatId:e,messageCount:a}){let[s,l]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),c=async()=>{d(!0),setTimeout(()=>{n({id:Date.now().toString(),summary:"Team discussed concrete pour scheduled for tomorrow at 8 AM with weather conditions confirmed as favorable. Site manager will have crew ready by 7:45 AM. Updated site plan has been uploaded for review.",actionItems:["Confirm concrete delivery time with supplier","Brief crew on updated safety protocols","Verify equipment readiness by 7:30 AM"],generatedAt:new Date}),d(!1)},1500)};return(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y,{className:"w-5 h-5 text-primary","aria-hidden":"true"}),(0,t.jsx)("h3",{className:"font-semibold text-foreground text-sm",children:"AI Assistant"})]}),(0,t.jsx)("button",{onClick:()=>l(!s),className:"p-1 hover:bg-muted rounded transition-colors","aria-expanded":s,"aria-label":"Toggle AI assistant",children:(0,t.jsx)(j.ChevronDown,{className:`w-4 h-4 transition-transform ${s?"transform rotate-180":""}`,"aria-hidden":"true"})})]}),s&&(0,t.jsxs)("div",{className:"space-y-3",children:[!i&&(0,t.jsx)("button",{onClick:c,disabled:o||0===a,className:"w-full px-3 py-2 bg-primary/10 text-primary border border-primary/30 rounded-lg text-sm font-medium hover:bg-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Summarize chat conversation",children:o?"Summarizing...":"Summarize Conversation"}),i&&(0,t.jsxs)("div",{className:"space-y-3 bg-muted/50 border border-border rounded-lg p-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Summary"}),(0,t.jsx)("p",{className:"text-sm text-foreground leading-relaxed",children:i.summary}),(0,t.jsxs)("button",{onClick:()=>{var e;return e=i.summary,void navigator.clipboard.writeText(e)},className:"mt-2 p-1 text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-1",title:"Copy summary",children:[(0,t.jsx)(v,{className:"w-3 h-3","aria-hidden":"true"}),(0,t.jsx)("span",{className:"text-xs",children:"Copy"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Action Items"}),(0,t.jsx)("ul",{className:"space-y-1",children:i.actionItems.map((e,r)=>(0,t.jsxs)("li",{className:"flex gap-2 text-sm text-foreground",children:[(0,t.jsx)("span",{className:"text-primary font-bold flex-shrink-0",children:"â€¢"}),(0,t.jsx)("span",{children:e})]},r))})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-border",children:(0,t.jsx)("button",{onClick:()=>n(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Generate New Summary"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Create RFI from Message"}),(0,t.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Create Task from Message"}),(0,t.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Extract Document Link"})]})]})]})]})}let k=(0,f.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),w=(0,f.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var C=e.i(78894),M=e.i(7233);function S({chatId:e,chatType:a,participants:s}){let[l,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)([{id:"1",name:"You",role:"admin",joinedAt:new Date(Date.now()-2592e6)},{id:"2",name:"Sarah Johnson",role:"member",joinedAt:new Date(Date.now()-1728e6)},{id:"3",name:"Mike Chen",role:"member",joinedAt:new Date(Date.now()-1296e6)}]),[d,c]=(0,r.useState)(!1);return"direct"===a?null:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(k,{className:"w-5 h-5 text-primary","aria-hidden":"true"}),(0,t.jsx)("h3",{className:"font-semibold text-foreground text-sm",children:"Group Settings"})]}),(0,t.jsx)("button",{onClick:()=>i(!l),className:"p-1 hover:bg-muted rounded transition-colors","aria-expanded":l,"aria-label":"Toggle group settings",children:(0,t.jsx)(j.ChevronDown,{className:`w-4 h-4 transition-transform ${l?"transform rotate-180":""}`,"aria-hidden":"true"})})]}),l&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:["Members (",n.length,")"]}),(0,t.jsx)("button",{onClick:()=>c(!0),className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Invite member",children:(0,t.jsx)(M.Plus,{className:"w-4 h-4 text-primary","aria-hidden":"true"})})]}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:n.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary/20 text-primary rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:e.name.substring(0,1)}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"admin"===e.role?"Admin":"Member"})]})]}),"1"!==e.id&&(0,t.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void o(n.map(e=>e.id===t&&"1"!==e.id?{...e,role:"admin"===e.role?"member":"admin"}:e))},className:"px-2 py-1 text-xs bg-muted rounded hover:bg-primary/20 transition-colors","aria-label":`Make ${e.name} ${"admin"===e.role?"member":"admin"}`,children:"admin"===e.role?"Demote":"Promote"}),(0,t.jsx)("button",{onClick:()=>{var t;"1"!==(t=e.id)&&o(n.filter(e=>e.id!==t))},className:"px-2 py-1 text-xs bg-destructive/10 text-destructive rounded hover:bg-destructive/20 transition-colors","aria-label":`Remove ${e.name}`,children:"Remove"})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"border-t border-border pt-3 space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Privacy"}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg cursor-pointer group",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 rounded border-border accent-primary","aria-label":"Allow members to invite others"}),(0,t.jsx)("span",{className:"text-sm text-foreground",children:"Members can invite others"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 rounded border-border accent-primary","aria-label":"Message history visible to new members"}),(0,t.jsx)("span",{className:"text-sm text-foreground",children:"Show message history to new members"})]})]}),(0,t.jsxs)("div",{className:"border-t border-border pt-3 space-y-2",children:[(0,t.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"}),(0,t.jsxs)("button",{className:"w-full px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2",children:[(0,t.jsx)(w,{className:"w-4 h-4","aria-hidden":"true"}),"Archive Chat"]}),(0,t.jsxs)("button",{className:"w-full px-3 py-2 bg-destructive/10 border border-destructive/30 rounded-lg text-sm text-destructive hover:bg-destructive/20 transition-colors text-left flex items-center gap-2",children:[(0,t.jsx)(C.AlertTriangle,{className:"w-4 h-4","aria-hidden":"true"}),"Report Group"]})]})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 w-96 shadow-lg space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-foreground",children:"Invite Members"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"invite-email",className:"text-sm font-medium text-foreground",children:"Email or Name"}),(0,t.jsx)("input",{id:"invite-email",type:"text",placeholder:"Enter email or select from contacts...",className:"w-full px-3 py-2 bg-muted rounded-lg border border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary/30 outline-none","aria-label":"Invite email or name"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-muted rounded-lg text-foreground hover:bg-muted/80 transition-colors text-sm font-medium",children:"Cancel"}),(0,t.jsx)("button",{className:"flex-1 px-4 py-2 bg-primary rounded-lg text-primary-foreground hover:bg-primary/90 transition-colors text-sm font-medium",children:"Send Invite"})]})]})})]})}var L=e.i(86311);function A({onClose:e,onBackMobile:a}){let{selectedChat:s,messages:l,sendMessage:f}=(0,g.useChat)(),[y,v]=(0,r.useState)(""),[j,k]=(0,r.useState)(!1),[w,C]=(0,r.useState)(null),[M,A]=(0,r.useState)(null),[T,D]=(0,r.useState)(!1);if(!s)return null;let z=()=>{y.trim()&&(f(s.id,y),v(""))},P=l.filter(e=>e.chatId===s.id);return(0,t.jsxs)("div",{className:"flex-1 border-l border-border bg-card flex flex-col hidden lg:flex shadow-md overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between bg-card flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0 ${"direct"===s.type?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:s.name.substring(0,2).toUpperCase()}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-foreground truncate",children:s.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"direct"===s.type?s.isOnline?"Online":`Last seen ${new Date(s.lastSeen||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${s.participants.length} members`})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-primary","aria-label":"Start voice call",children:(0,t.jsx)(d.Phone,{className:"w-5 h-5"})}),(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-primary","aria-label":"Start video call",children:(0,t.jsx)(c.Video,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>D(!T),className:"p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Toggle chat sidebar",children:(0,t.jsx)(m.MoreVertical,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:e,className:"p-2 hover:bg-muted rounded-lg transition-colors lg:hidden","aria-label":"Close chat",children:(0,t.jsx)(u.ChevronLeft,{className:"w-5 h-5"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-background",children:0===P.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,t.jsx)(L.MessageSquare,{className:"w-16 h-16 text-muted-foreground mb-4 opacity-30"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No messages yet. Start the conversation!"})]}):P.map(e=>(0,t.jsxs)("div",{className:`flex gap-3 group ${"user-1"===e.senderId?"flex-row-reverse":""}`,onMouseEnter:()=>C(e.id),onMouseLeave:()=>C(null),children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${"user-1"===e.senderId?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:e.sender.substring(0,2).toUpperCase()}),(0,t.jsxs)("div",{className:`flex-1 max-w-xs ${"user-1"===e.senderId?"items-end":""}`,children:[(0,t.jsxs)("div",{className:"flex items-baseline gap-2 px-1",children:["user-1"!==e.senderId&&(0,t.jsx)("span",{className:"text-xs font-semibold text-foreground",children:e.sender}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsx)("div",{className:`mt-1 px-4 py-2 rounded-lg ${"user-1"===e.senderId?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:(0,t.jsx)("p",{className:"text-sm break-words",children:e.text})}),e.attachment&&(0,t.jsxs)("div",{className:"mt-2 px-3 py-2 bg-muted rounded-lg border border-border flex items-center gap-2 max-w-xs",children:[(0,t.jsx)(n.Paperclip,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),(0,t.jsx)("span",{className:"text-xs text-foreground truncate",children:e.attachment.name})]}),Object.keys(e.reactions).length>0&&(0,t.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:Object.entries(e.reactions).map(([e,r])=>(0,t.jsxs)("button",{className:"px-2 py-1 bg-muted rounded text-xs hover:bg-primary/20 transition-colors",title:r.join(", "),children:[e," ",r.length]},e))}),w===e.id&&(0,t.jsxs)("div",{className:"flex gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Add reaction",children:(0,t.jsx)(o.Smile,{className:"w-4 h-4 text-muted-foreground"})}),(0,t.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Reply",children:(0,t.jsx)(h.Reply,{className:"w-4 h-4 text-muted-foreground"})}),"user-1"===e.senderId&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Edit",children:(0,t.jsx)(p.Edit2,{className:"w-4 h-4 text-muted-foreground"})}),(0,t.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-destructive/20 transition-colors",title:"Delete",children:(0,t.jsx)(b.Trash2,{className:"w-4 h-4 text-destructive"})})]})]})]}),"user-1"===e.senderId&&e.isRead&&(0,t.jsx)("div",{className:"pt-1",children:(0,t.jsx)(x.CheckCheck,{className:"w-4 h-4 text-primary"})})]},e.id))}),(0,t.jsxs)("div",{className:"p-4 border-t border-border space-y-3 bg-card flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-foreground","aria-label":"Attach file",children:(0,t.jsx)(n.Paperclip,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)("input",{type:"text",placeholder:"Type a message...",value:y,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),z())},className:"w-full bg-muted px-3 py-2 rounded-lg text-sm outline-none text-foreground placeholder:text-muted-foreground border border-border focus:border-primary focus:ring-1 focus:ring-primary/30 transition-all"})}),(0,t.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-foreground","aria-label":"Add emoji",onClick:()=>k(!j),children:(0,t.jsx)(o.Smile,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:z,disabled:!y.trim(),className:"p-2 bg-primary hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-primary-foreground transition-all","aria-label":"Send message",children:(0,t.jsx)(i.Send,{className:"w-4 h-4"})})]}),j&&(0,t.jsx)("div",{className:"flex gap-2 pb-2 border-t border-border pt-2",children:["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸŽ‰","ðŸš€","ðŸ‘"].map(e=>(0,t.jsx)("button",{onClick:()=>{v(y+" "+e),k(!1)},className:"text-lg hover:scale-125 transition-transform",children:e},e))})]})]}),T&&(0,t.jsxs)("div",{className:"w-80 border-l border-border bg-muted/30 overflow-y-auto space-y-4 p-4 flex-shrink-0",children:[(0,t.jsx)(N,{chatId:s.id,messageCount:P.length}),(0,t.jsx)(S,{chatId:s.id,chatType:s.type,participants:s.participants})]})]})]})}function T({children:e,forceChatOpen:i}){let[n,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1),{isChatOpen:m,setChatOpen:u,selectedChat:x}=(0,g.useChat)(),[h,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{p(window.innerWidth<1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let b=i||m,f=!h||!b;return(0,t.jsxs)("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[(0,t.jsx)(a.Sidebar,{isOpen:n,isCollapsed:d,onToggle:o,onCollapse:c}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Topbar,{onToggleSidebar:()=>o(!n),onToggleChat:()=>u(!b)}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden gap-0",children:[b&&!h&&(0,t.jsx)(l.ChatListPanel,{onChatSelect:()=>{}}),f&&(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-background",children:(0,t.jsx)("div",{className:"p-6 md:p-8 max-w-7xl mx-auto w-full",children:e})}),b&&x&&(0,t.jsx)(A,{onClose:()=>u(!1),onBackMobile:()=>{h&&u(!1)}})]})]})]})}e.s(["ChatThreadPanel",()=>A],23891),e.s(["DashboardLayout",()=>T],10265)}]);