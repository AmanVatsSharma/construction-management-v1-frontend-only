module.exports=[70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},79360,a=>{"use strict";let b=(0,a.i(70106).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);a.s(["MoreVertical",()=>b],79360)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},33508,81010,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>c],33508);let d=(0,b.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);a.s(["Home",()=>d],81010)},39761,a=>{"use strict";let b=(0,a.i(70106).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);a.s(["BarChart3",()=>b],39761)},63588,87534,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);a.s(["MessageSquare",()=>c],63588);let d=(0,b.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckSquare",()=>d],87534)},21161,20005,5784,13749,50522,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>c],21161);let d=(0,b.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);a.s(["LogOut",()=>d],20005);let e=(0,b.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>e],5784);let f=(0,b.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>f],13749);let g=(0,b.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>g],50522)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},90166,73570,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>c],90166);let d=(0,b.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>d],73570)},55088,23312,87532,46842,62378,a=>{"use strict";var b=a.i(87924),c=a.i(33508),d=a.i(81010),e=a.i(39761),f=a.i(63588),g=a.i(87534),h=a.i(4720),i=a.i(21161),j=a.i(20005),k=a.i(5784),l=a.i(13749),m=a.i(50522),n=a.i(41675),o=a.i(90166),p=a.i(73570),q=a.i(70106);let r=(0,q.default)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),s=(0,q.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var t=a.i(38246),u=a.i(50944);function v({isOpen:a,isCollapsed:q,onToggle:v,onCollapse:w}){let x=(0,u.usePathname)(),y=[{icon:d.Home,label:"Dashboard",href:"/"},{icon:s,label:"Modules",href:"/modules"},{icon:e.BarChart3,label:"Projects",href:"/projects"},{icon:f.MessageSquare,label:"Chat",href:"/chat"},{icon:g.CheckSquare,label:"Tasks",href:"/tasks"},{icon:h.FileText,label:"Reports",href:"/reports"},{icon:n.Calendar,label:"Site Diary",href:"/site-diary"},{icon:o.DollarSign,label:"Budget",href:"/budget"},{icon:r,label:"RFI & Submittals",href:"/rfi"},{icon:p.AlertTriangle,label:"Risk",href:"/risk"},{icon:o.DollarSign,label:"Invoicing",href:"/invoicing"},{icon:i.Settings,label:"Settings",href:"/settings"}];return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsx)("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>v(!1),role:"presentation"}),(0,b.jsxs)("aside",{className:`${a?"translate-x-0":"-translate-x-full"} fixed lg:static lg:translate-x-0 z-40 h-screen transition-all duration-300 ease-in-out flex flex-col shadow-lg border-r border-border bg-card ${q?"w-20":"w-64"}`,children:[(0,b.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between flex-shrink-0",children:[!q&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-primary-foreground font-bold text-lg font-heading",children:"C"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-bold text-foreground font-heading",children:"ConstructHub"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"v0.1"})]})]}),(0,b.jsx)("button",{onClick:()=>w(!q),className:"hidden lg:flex p-1.5 hover:bg-muted rounded-lg transition-colors","aria-label":q?"Expand sidebar":"Collapse sidebar",title:q?"Expand sidebar":"Collapse sidebar",children:q?(0,b.jsx)(m.ChevronRight,{className:"w-5 h-5"}):(0,b.jsx)(l.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>v(!1),className:"lg:hidden p-1 hover:bg-muted rounded","aria-label":"Close sidebar",children:(0,b.jsx)(c.X,{className:"w-5 h-5"})})]}),!q&&(0,b.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2 font-semibold uppercase tracking-wider",children:"Current Project"}),(0,b.jsxs)("button",{className:"w-full px-3 py-2.5 bg-primary/10 border border-primary/30 rounded-lg text-sm text-foreground font-medium hover:bg-primary/20 transition-colors flex items-center justify-between group",children:[(0,b.jsx)("span",{className:"truncate group-hover:text-primary transition-colors",children:"Downtown Tower Phase 2"}),(0,b.jsx)(k.ChevronDown,{className:"w-4 h-4 flex-shrink-0"})]})]}),(0,b.jsx)("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:y.map(c=>{let d=x===c.href||"/"!==c.href&&x.startsWith(c.href);return(0,b.jsxs)(t.default,{href:c.href,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all group ${d?"bg-primary text-primary-foreground":"text-foreground hover:bg-primary/10 hover:text-primary"} ${q?"justify-center":""}`,title:q?c.label:void 0,onClick:()=>{a&&v(!1)},children:[(0,b.jsx)(c.icon,{className:"w-5 h-5 flex-shrink-0 transition-colors"}),!q&&(0,b.jsx)("span",{className:"font-medium text-sm",children:c.label})]},c.href)})}),(0,b.jsx)("div",{className:"p-2 border-t border-border",children:(0,b.jsxs)("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-foreground hover:bg-destructive/10 hover:text-destructive transition-all font-medium ${q?"justify-center":""}`,title:q?"Logout":void 0,children:[(0,b.jsx)(j.LogOut,{className:"w-5 h-5"}),!q&&(0,b.jsx)("span",{className:"text-sm",children:"Logout"})]})})]})]})}a.s(["Sidebar",()=>v],55088);let w=(0,q.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),x=(0,q.default)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);a.s(["Bell",()=>x],23312);let y=(0,q.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>y],87532);let z=(0,q.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>z],46842);var A=a.i(72131),B=a.i(92949);function C({onToggleSidebar:a,onToggleChat:c}){let[d,e]=(0,A.useState)(!1),[g,h]=(0,A.useState)(!1),{setChatOpen:i}=(0,B.useChat)();return!function({onSearchOpen:a,onChatOpen:b,onProjectsOpen:c,onNewMessage:d}){(0,A.useEffect)(()=>{let e=e=>{let f=e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement;if("/"!==e.key||f||(e.preventDefault(),a?.()),"g"===e.key){let a=d=>{"c"===d.key?(d.preventDefault(),b?.()):"p"===d.key&&(d.preventDefault(),c?.()),document.removeEventListener("keydown",a)};document.addEventListener("keydown",a),setTimeout(()=>{document.removeEventListener("keydown",a)},1500)}(e.ctrlKey||e.metaKey)&&e.shiftKey&&"m"===e.key&&(e.preventDefault(),d?.())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[a,b,c,d])}({onSearchOpen:()=>h(!0),onChatOpen:()=>{i(!0),c()}}),(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b border-border bg-card backdrop-blur-md bg-opacity-95",children:(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 h-16 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:a,className:"lg:hidden p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Toggle sidebar",children:(0,b.jsx)(w,{className:"w-5 h-5"})}),(0,b.jsx)("h2",{className:"text-lg font-bold text-foreground font-heading",children:"Dashboard"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"hidden md:flex items-center gap-2 bg-muted px-4 py-2 rounded-lg border border-border focus-within:border-primary transition-colors group cursor-pointer",role:"button",tabIndex:0,"aria-label":"Search projects and tasks (press / to focus)",onClick:()=>h(!0),onKeyDown:a=>{("Enter"===a.key||" "===a.key)&&h(!0)},children:[(0,b.jsx)(y,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search projects, tasks...",className:"bg-transparent text-sm outline-none w-48 text-foreground placeholder:text-muted-foreground","aria-label":"Search"}),(0,b.jsx)("kbd",{className:"hidden sm:inline text-xs text-muted-foreground ml-auto px-2 py-1 rounded bg-card border border-border",children:"/"})]}),(0,b.jsx)("button",{onClick:c,className:"p-2 hover:bg-muted rounded-lg transition-colors hover:text-primary","aria-label":"Toggle chat",title:"Open chat (press g then c)",children:(0,b.jsx)(f.MessageSquare,{className:"w-5 h-5"})}),(0,b.jsxs)("button",{className:"relative p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Notifications","aria-describedby":"notification-count",children:[(0,b.jsx)(x,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-secondary rounded-full",id:"notification-count","aria-live":"polite"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>e(!d),className:"flex items-center gap-3 pl-3 pr-2 py-2 rounded-lg hover:bg-muted transition-colors border border-border","aria-label":"User menu","aria-expanded":d,"aria-haspopup":"menu",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(z,{className:"w-4 h-4 text-primary-foreground","aria-hidden":"true"})}),(0,b.jsx)("span",{className:"hidden sm:inline text-sm font-medium text-foreground",children:"John Doe"})]}),d&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg overflow-hidden z-50",role:"menu",children:[(0,b.jsxs)("div",{className:"px-4 py-3 border-b border-border",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"John Doe"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"john.doe@example.com"})]}),(0,b.jsxs)("div",{className:"py-2",children:[(0,b.jsx)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left",role:"menuitem",children:"Profile Settings"}),(0,b.jsx)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left",role:"menuitem",children:"Preferences"}),(0,b.jsx)("hr",{className:"border-border my-2"}),(0,b.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-destructive hover:bg-muted transition-colors text-left flex items-center gap-2",role:"menuitem",children:[(0,b.jsx)(j.LogOut,{className:"w-4 h-4","aria-hidden":"true"}),"Logout"]})]})]})]})]})]})})}a.s(["Topbar",()=>C],62378)},14664,63519,64791,92759,83952,7428,20610,23808,10448,a=>{"use strict";var b=a.i(87924),c=a.i(87532),d=a.i(15618),e=a.i(79360),f=a.i(70106);let g=(0,f.default)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),h=(0,f.default)("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),i=(0,f.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>i],63519);let j=(0,f.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);a.s(["Video",()=>j],64791);var k=a.i(23312),l=a.i(72131),m=a.i(92949),n=a.i(63588);function o({onChatSelect:a}){let{chats:f,selectChat:o,togglePinChat:p,selectedChat:q}=(0,m.useChat)(),[r,s]=(0,l.useState)(""),[t,u]=(0,l.useState)(null),v=[...f.filter(a=>a.isPinned),...f.filter(a=>!a.isPinned)];return(0,b.jsxs)("div",{className:"w-80 border-r border-border bg-card flex flex-col shadow-md",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-border space-y-4 flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-foreground font-heading",children:"Messages"}),(0,b.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Start new chat",title:"Start new chat",children:(0,b.jsx)(d.Plus,{className:"w-5 h-5 text-primary","aria-hidden":"true"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-muted px-3 py-2 rounded-lg border border-border focus-within:border-primary transition-colors",children:[(0,b.jsx)(c.Search,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"}),(0,b.jsx)("input",{type:"text",placeholder:"Search chats...",value:r,onChange:a=>s(a.target.value),className:"bg-transparent text-sm outline-none flex-1 text-foreground placeholder:text-muted-foreground","aria-label":"Search chats"})]}),(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",role:"tablist",children:["All","Teams","Contractors","Site"].map(a=>(0,b.jsx)("button",{className:"px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap bg-muted text-foreground hover:bg-primary/20 hover:text-primary transition-colors",role:"tab","aria-selected":"All"===a,"aria-label":`Filter by ${a}`,children:a},a))})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto space-y-1 p-2",role:"list",children:0===v.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,b.jsx)(n.MessageSquare,{className:"w-12 h-12 text-muted-foreground mb-2 opacity-50","aria-hidden":"true"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"No chats yet"})]}):v.map(c=>(0,b.jsxs)("div",{className:"relative group",role:"listitem",children:[(0,b.jsx)("button",{onClick:()=>{o(c),a?.()},onKeyDown:b=>{var d;return d=()=>{o(c),a?.()},void(("Enter"===b.key||" "===b.key)&&(b.preventDefault(),d()))},className:`w-full px-3 py-3 rounded-lg text-left transition-all hover:bg-muted group focus:outline-none focus:ring-2 focus:ring-primary/50 ${q?.id===c.id?"bg-primary/10 border border-primary/30":""}`,"aria-label":`${c.name}${c.unreadCount>0?`, ${c.unreadCount} unread`:""}`,"aria-current":q?.id===c.id?"true":"false",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm ${"direct"===c.type?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,"aria-hidden":"true",children:c.name.substring(0,2).toUpperCase()}),c.isOnline&&(0,b.jsx)("span",{className:"absolute bottom-0 right-0 w-3 h-3 bg-accent rounded-full border-2 border-card","aria-label":"Online"})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-baseline justify-between gap-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground truncate text-sm",children:c.name}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:c.lastMessageTime?new Date(c.lastMessageTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:c.lastMessage}),c.tags.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:c.tags.map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 text-xs bg-primary/10 text-primary rounded","aria-label":a,children:a},a))})]}),c.unreadCount>0&&(0,b.jsx)("div",{className:"w-5 h-5 bg-secondary text-secondary-foreground rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0","aria-label":`${c.unreadCount} unread`,children:c.unreadCount})]})}),(0,b.jsxs)("div",{className:"absolute right-2 top-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),p(c.id)},className:"p-1.5 bg-card border border-border rounded hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50","aria-label":c.isPinned?"Unpin chat":"Pin chat",title:c.isPinned?"Unpin":"Pin",children:c.isPinned?(0,b.jsx)(h,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"}):(0,b.jsx)(g,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"})}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),u(t===c.id?null:c.id)},className:"p-1.5 bg-card border border-border rounded hover:bg-muted transition-colors focus:outline-none focus:ring-2 focus:ring-primary/50","aria-label":"More options","aria-expanded":t===c.id,"aria-haspopup":"menu",children:(0,b.jsx)(e.MoreVertical,{className:"w-4 h-4 text-muted-foreground","aria-hidden":"true"})})]}),t===c.id&&(0,b.jsxs)("div",{className:"absolute right-0 top-12 w-40 bg-card border border-border rounded-lg shadow-lg z-50",role:"menu",children:[(0,b.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,b.jsx)(i,{className:"w-4 h-4","aria-hidden":"true"}),"Call"]}),(0,b.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,b.jsx)(j,{className:"w-4 h-4","aria-hidden":"true"}),"Video Call"]}),(0,b.jsx)("hr",{className:"border-border my-2"}),(0,b.jsxs)("button",{className:"w-full px-4 py-2 text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2 focus:outline-none focus:bg-muted",role:"menuitem",children:[(0,b.jsx)(k.Bell,{className:"w-4 h-4","aria-hidden":"true"}),"Mute"]}),(0,b.jsx)("button",{className:"w-full px-4 py-2 text-sm text-destructive hover:bg-muted transition-colors text-left focus:outline-none focus:bg-muted",role:"menuitem",children:"Delete"})]})]},c.id))})]})}a.s(["ChatListPanel",()=>o],14664);let p=(0,f.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>p],92759);let q=(0,f.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);a.s(["Paperclip",()=>q],83952);let r=(0,f.default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);a.s(["Smile",()=>r],7428);let s=(0,f.default)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);a.s(["CheckCheck",()=>s],20610);let t=(0,f.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);a.s(["Reply",()=>t],23808);let u=(0,f.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit2",()=>u],10448)},53062,95469,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(55088),e=a.i(62378),f=a.i(14664),g=a.i(92759),h=a.i(83952),i=a.i(7428),j=a.i(63519),k=a.i(64791),l=a.i(79360),m=a.i(13749),n=a.i(20610),o=a.i(23808),p=a.i(10448),q=a.i(81560);a.i(4720);var r=a.i(70106);(0,r.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var s=a.i(92949);let t=(0,r.default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),u=(0,r.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var v=a.i(5784);function w({chatId:a,messageCount:d}){let[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),k=async()=>{j(!0),setTimeout(()=>{h({id:Date.now().toString(),summary:"Team discussed concrete pour scheduled for tomorrow at 8 AM with weather conditions confirmed as favorable. Site manager will have crew ready by 7:45 AM. Updated site plan has been uploaded for review.",actionItems:["Confirm concrete delivery time with supplier","Brief crew on updated safety protocols","Verify equipment readiness by 7:30 AM"],generatedAt:new Date}),j(!1)},1500)};return(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t,{className:"w-5 h-5 text-primary","aria-hidden":"true"}),(0,b.jsx)("h3",{className:"font-semibold text-foreground text-sm",children:"AI Assistant"})]}),(0,b.jsx)("button",{onClick:()=>f(!e),className:"p-1 hover:bg-muted rounded transition-colors","aria-expanded":e,"aria-label":"Toggle AI assistant",children:(0,b.jsx)(v.ChevronDown,{className:`w-4 h-4 transition-transform ${e?"transform rotate-180":""}`,"aria-hidden":"true"})})]}),e&&(0,b.jsxs)("div",{className:"space-y-3",children:[!g&&(0,b.jsx)("button",{onClick:k,disabled:i||0===d,className:"w-full px-3 py-2 bg-primary/10 text-primary border border-primary/30 rounded-lg text-sm font-medium hover:bg-primary/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Summarize chat conversation",children:i?"Summarizing...":"Summarize Conversation"}),g&&(0,b.jsxs)("div",{className:"space-y-3 bg-muted/50 border border-border rounded-lg p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Summary"}),(0,b.jsx)("p",{className:"text-sm text-foreground leading-relaxed",children:g.summary}),(0,b.jsxs)("button",{onClick:()=>{var a;return a=g.summary,void navigator.clipboard.writeText(a)},className:"mt-2 p-1 text-muted-foreground hover:text-foreground transition-colors inline-flex items-center gap-1",title:"Copy summary",children:[(0,b.jsx)(u,{className:"w-3 h-3","aria-hidden":"true"}),(0,b.jsx)("span",{className:"text-xs",children:"Copy"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Action Items"}),(0,b.jsx)("ul",{className:"space-y-1",children:g.actionItems.map((a,c)=>(0,b.jsxs)("li",{className:"flex gap-2 text-sm text-foreground",children:[(0,b.jsx)("span",{className:"text-primary font-bold flex-shrink-0",children:"â€¢"}),(0,b.jsx)("span",{children:a})]},c))})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-border",children:(0,b.jsx)("button",{onClick:()=>h(null),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Generate New Summary"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Quick Actions"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Create RFI from Message"}),(0,b.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Create Task from Message"}),(0,b.jsx)("button",{className:"px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left",children:"Extract Document Link"})]})]})]})]})}let x=(0,r.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),y=(0,r.default)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var z=a.i(73570),A=a.i(15618);function B({chatId:a,chatType:d,participants:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)([{id:"1",name:"You",role:"admin",joinedAt:new Date(Date.now()-2592e6)},{id:"2",name:"Sarah Johnson",role:"member",joinedAt:new Date(Date.now()-1728e6)},{id:"3",name:"Mike Chen",role:"member",joinedAt:new Date(Date.now()-1296e6)}]),[j,k]=(0,c.useState)(!1);return"direct"===d?null:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x,{className:"w-5 h-5 text-primary","aria-hidden":"true"}),(0,b.jsx)("h3",{className:"font-semibold text-foreground text-sm",children:"Group Settings"})]}),(0,b.jsx)("button",{onClick:()=>g(!f),className:"p-1 hover:bg-muted rounded transition-colors","aria-expanded":f,"aria-label":"Toggle group settings",children:(0,b.jsx)(v.ChevronDown,{className:`w-4 h-4 transition-transform ${f?"transform rotate-180":""}`,"aria-hidden":"true"})})]}),f&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:["Members (",h.length,")"]}),(0,b.jsx)("button",{onClick:()=>k(!0),className:"p-1 hover:bg-muted rounded transition-colors","aria-label":"Invite member",children:(0,b.jsx)(A.Plus,{className:"w-4 h-4 text-primary","aria-hidden":"true"})})]}),(0,b.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg group",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-primary/20 text-primary rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",children:a.name.substring(0,1)}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"admin"===a.role?"Admin":"Member"})]})]}),"1"!==a.id&&(0,b.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void i(h.map(a=>a.id===b&&"1"!==a.id?{...a,role:"admin"===a.role?"member":"admin"}:a))},className:"px-2 py-1 text-xs bg-muted rounded hover:bg-primary/20 transition-colors","aria-label":`Make ${a.name} ${"admin"===a.role?"member":"admin"}`,children:"admin"===a.role?"Demote":"Promote"}),(0,b.jsx)("button",{onClick:()=>{var b;"1"!==(b=a.id)&&i(h.filter(a=>a.id!==b))},className:"px-2 py-1 text-xs bg-destructive/10 text-destructive rounded hover:bg-destructive/20 transition-colors","aria-label":`Remove ${a.name}`,children:"Remove"})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"border-t border-border pt-3 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Privacy"}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg cursor-pointer group",children:[(0,b.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 rounded border-border accent-primary","aria-label":"Allow members to invite others"}),(0,b.jsx)("span",{className:"text-sm text-foreground",children:"Members can invite others"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-2 hover:bg-muted/50 rounded-lg cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 rounded border-border accent-primary","aria-label":"Message history visible to new members"}),(0,b.jsx)("span",{className:"text-sm text-foreground",children:"Show message history to new members"})]})]}),(0,b.jsxs)("div",{className:"border-t border-border pt-3 space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Actions"}),(0,b.jsxs)("button",{className:"w-full px-3 py-2 bg-muted/50 border border-border rounded-lg text-sm text-foreground hover:bg-muted transition-colors text-left flex items-center gap-2",children:[(0,b.jsx)(y,{className:"w-4 h-4","aria-hidden":"true"}),"Archive Chat"]}),(0,b.jsxs)("button",{className:"w-full px-3 py-2 bg-destructive/10 border border-destructive/30 rounded-lg text-sm text-destructive hover:bg-destructive/20 transition-colors text-left flex items-center gap-2",children:[(0,b.jsx)(z.AlertTriangle,{className:"w-4 h-4","aria-hidden":"true"}),"Report Group"]})]})]}),j&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 w-96 shadow-lg space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-foreground",children:"Invite Members"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"invite-email",className:"text-sm font-medium text-foreground",children:"Email or Name"}),(0,b.jsx)("input",{id:"invite-email",type:"text",placeholder:"Enter email or select from contacts...",className:"w-full px-3 py-2 bg-muted rounded-lg border border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-1 focus:ring-primary/30 outline-none","aria-label":"Invite email or name"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-2 bg-muted rounded-lg text-foreground hover:bg-muted/80 transition-colors text-sm font-medium",children:"Cancel"}),(0,b.jsx)("button",{className:"flex-1 px-4 py-2 bg-primary rounded-lg text-primary-foreground hover:bg-primary/90 transition-colors text-sm font-medium",children:"Send Invite"})]})]})})]})}var C=a.i(63588);function D({onClose:a,onBackMobile:d}){let{selectedChat:e,messages:f,sendMessage:r}=(0,s.useChat)(),[t,u]=(0,c.useState)(""),[v,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[A,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1);if(!e)return null;let G=()=>{t.trim()&&(r(e.id,t),u(""))},H=f.filter(a=>a.chatId===e.id);return(0,b.jsxs)("div",{className:"flex-1 border-l border-border bg-card flex flex-col hidden lg:flex shadow-md overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between bg-card flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0 ${"direct"===e.type?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:e.name.substring(0,2).toUpperCase()}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h3",{className:"font-bold text-foreground truncate",children:e.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"direct"===e.type?e.isOnline?"Online":`Last seen ${new Date(e.lastSeen||Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:`${e.participants.length} members`})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-primary","aria-label":"Start voice call",children:(0,b.jsx)(j.Phone,{className:"w-5 h-5"})}),(0,b.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-primary","aria-label":"Start video call",children:(0,b.jsx)(k.Video,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>F(!E),className:"p-2 hover:bg-muted rounded-lg transition-colors","aria-label":"Toggle chat sidebar",children:(0,b.jsx)(l.MoreVertical,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:a,className:"p-2 hover:bg-muted rounded-lg transition-colors lg:hidden","aria-label":"Close chat",children:(0,b.jsx)(m.ChevronLeft,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-border scrollbar-track-background",children:0===H.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,b.jsx)(C.MessageSquare,{className:"w-16 h-16 text-muted-foreground mb-4 opacity-30"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No messages yet. Start the conversation!"})]}):H.map(a=>(0,b.jsxs)("div",{className:`flex gap-3 group ${"user-1"===a.senderId?"flex-row-reverse":""}`,onMouseEnter:()=>z(a.id),onMouseLeave:()=>z(null),children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${"user-1"===a.senderId?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:a.sender.substring(0,2).toUpperCase()}),(0,b.jsxs)("div",{className:`flex-1 max-w-xs ${"user-1"===a.senderId?"items-end":""}`,children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2 px-1",children:["user-1"!==a.senderId&&(0,b.jsx)("span",{className:"text-xs font-semibold text-foreground",children:a.sender}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsx)("div",{className:`mt-1 px-4 py-2 rounded-lg ${"user-1"===a.senderId?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:(0,b.jsx)("p",{className:"text-sm break-words",children:a.text})}),a.attachment&&(0,b.jsxs)("div",{className:"mt-2 px-3 py-2 bg-muted rounded-lg border border-border flex items-center gap-2 max-w-xs",children:[(0,b.jsx)(h.Paperclip,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),(0,b.jsx)("span",{className:"text-xs text-foreground truncate",children:a.attachment.name})]}),Object.keys(a.reactions).length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:Object.entries(a.reactions).map(([a,c])=>(0,b.jsxs)("button",{className:"px-2 py-1 bg-muted rounded text-xs hover:bg-primary/20 transition-colors",title:c.join(", "),children:[a," ",c.length]},a))}),y===a.id&&(0,b.jsxs)("div",{className:"flex gap-1 mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Add reaction",children:(0,b.jsx)(i.Smile,{className:"w-4 h-4 text-muted-foreground"})}),(0,b.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Reply",children:(0,b.jsx)(o.Reply,{className:"w-4 h-4 text-muted-foreground"})}),"user-1"===a.senderId&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-primary/20 transition-colors",title:"Edit",children:(0,b.jsx)(p.Edit2,{className:"w-4 h-4 text-muted-foreground"})}),(0,b.jsx)("button",{className:"p-1.5 bg-muted rounded hover:bg-destructive/20 transition-colors",title:"Delete",children:(0,b.jsx)(q.Trash2,{className:"w-4 h-4 text-destructive"})})]})]})]}),"user-1"===a.senderId&&a.isRead&&(0,b.jsx)("div",{className:"pt-1",children:(0,b.jsx)(n.CheckCheck,{className:"w-4 h-4 text-primary"})})]},a.id))}),(0,b.jsxs)("div",{className:"p-4 border-t border-border space-y-3 bg-card flex-shrink-0",children:[(0,b.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,b.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-foreground","aria-label":"Attach file",children:(0,b.jsx)(h.Paperclip,{className:"w-4 h-4"})}),(0,b.jsx)("div",{className:"flex-1 relative",children:(0,b.jsx)("input",{type:"text",placeholder:"Type a message...",value:t,onChange:a=>u(a.target.value),onKeyPress:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),G())},className:"w-full bg-muted px-3 py-2 rounded-lg text-sm outline-none text-foreground placeholder:text-muted-foreground border border-border focus:border-primary focus:ring-1 focus:ring-primary/30 transition-all"})}),(0,b.jsx)("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors text-muted-foreground hover:text-foreground","aria-label":"Add emoji",onClick:()=>x(!v),children:(0,b.jsx)(i.Smile,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:G,disabled:!t.trim(),className:"p-2 bg-primary hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-primary-foreground transition-all","aria-label":"Send message",children:(0,b.jsx)(g.Send,{className:"w-4 h-4"})})]}),v&&(0,b.jsx)("div",{className:"flex gap-2 pb-2 border-t border-border pt-2",children:["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸŽ‰","ðŸš€","ðŸ‘"].map(a=>(0,b.jsx)("button",{onClick:()=>{u(t+" "+a),x(!1)},className:"text-lg hover:scale-125 transition-transform",children:a},a))})]})]}),E&&(0,b.jsxs)("div",{className:"w-80 border-l border-border bg-muted/30 overflow-y-auto space-y-4 p-4 flex-shrink-0",children:[(0,b.jsx)(w,{chatId:e.id,messageCount:H.length}),(0,b.jsx)(B,{chatId:e.id,chatType:e.type,participants:e.participants})]})]})]})}function E({children:a,forceChatOpen:g}){let[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),{isChatOpen:l,setChatOpen:m,selectedChat:n}=(0,s.useChat)(),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=()=>{p(window.innerWidth<1024)};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);let q=g||l,r=!o||!q;return(0,b.jsxs)("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[(0,b.jsx)(d.Sidebar,{isOpen:h,isCollapsed:j,onToggle:i,onCollapse:k}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,b.jsx)(e.Topbar,{onToggleSidebar:()=>i(!h),onToggleChat:()=>m(!q)}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden gap-0",children:[q&&!o&&(0,b.jsx)(f.ChatListPanel,{onChatSelect:()=>{}}),r&&(0,b.jsx)("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-border scrollbar-track-background",children:(0,b.jsx)("div",{className:"p-6 md:p-8 max-w-7xl mx-auto w-full",children:a})}),q&&n&&(0,b.jsx)(D,{onClose:()=>m(!1),onBackMobile:()=>{o&&m(!1)}})]})]})]})}a.s(["ChatThreadPanel",()=>D],95469),a.s(["DashboardLayout",()=>E],53062)}];

//# sourceMappingURL=_285acef0._.js.map